FROM ansibleplaybookbundle/apb-base

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY plugins /opt/ansible/plugins
COPY ansible.cfg /etc/ansible/
RUN chmod -R g=u /opt/{ansible,apb}
USER apb

LABEL "com.redhat.apb.version"="1.3.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBwcm9tZXRoZXVzLWFwYgpkZXNjcmlwdGlvbjogRGVwbG95\
IFByb21ldGhldXMgb24geW91ciBQcm9qZWN0CmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9u\
YWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IFByb21ldGhldXMgKEFQQikKICBpbWFnZVVybDog\
aHR0cHM6Ly9hdmF0YXJzMS5naXRodWJ1c2VyY29udGVudC5jb20vdS8zMzgwNDYyP3M9MjAwJnY9\
NAogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIGxvbmdEZXNjcmlwdGlv\
bjogUHJvbWV0aGV1cyBpcyBhbiBvcGVuLXNvdXJjZSBzeXN0ZW1zIG1vbml0b3JpbmcgYW5kIGFs\
ZXJ0aW5nIHRvb2xraXQgb3JpZ2luYWxseSBidWlsdCBhdCBTb3VuZENsb3VkLiBTaW5jZSBpdHMg\
aW5jZXB0aW9uIGluIDIwMTIsIG1hbnkgY29tcGFuaWVzIGFuZCBvcmdhbml6YXRpb25zIGhhdmUg\
YWRvcHRlZCBQcm9tZXRoZXVzLCBhbmQgdGhlIHByb2plY3QgaGFzIGEgdmVyeSBhY3RpdmUgZGV2\
ZWxvcGVyIGFuZCB1c2VyIGNvbW11bml0eS4gSXQgaXMgbm93IGEgc3RhbmRhbG9uZSBvcGVuIHNv\
dXJjZSBwcm9qZWN0IGFuZCBtYWludGFpbmVkIGluZGVwZW5kZW50bHkgb2YgYW55IGNvbXBhbnku\
IFRvIGVtcGhhc2l6ZSB0aGlzLCBhbmQgdG8gY2xhcmlmeSB0aGUgcHJvamVjdCdzIGdvdmVybmFu\
Y2Ugc3RydWN0dXJlLCBQcm9tZXRoZXVzIGpvaW5lZCB0aGUgQ2xvdWQgTmF0aXZlIENvbXB1dGlu\
ZyBGb3VuZGF0aW9uIGluIDIwMTYgYXMgdGhlIHNlY29uZCBob3N0ZWQgcHJvamVjdCwgYWZ0ZXIg\
S3ViZXJuZXRlcy4KICBzZXJ2aWNlTmFtZTogcHJvbWV0aGV1cwpwbGFuczoKICAtIG5hbWU6IGVw\
aGVtZXJhbAogICAgZGVzY3JpcHRpb246IERlcGxveW1lbnQgb2YgUHJvbWV0aGV1cyBmb3IgbWV0\
cmljcyBhbmQgZGF0YSB2aWV3CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlz\
cGxheU5hbWU6IEVwaGVtZXJhbAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBs\
b3kgdGhlIHByb21ldGhldXMgYmFzZSBzdGFjaywgUHJvbWV0aGV1cyB3aXRoIGEgc2lkZWNhciBP\
YXV0aC1Qcm94eSBhbmQgYWxzbyB0aGUgQWxlcnRNYW5hZ2VyIHNlcnZlciBiYXNlIG9uIEVwaGVt\
ZXJhbCBzdG9yYWdlLiBZb3UgY291bGQgZGVwbG95IHRoZSBBZGRvbnMgbGlrZSBHcmFwaGFuYSwg\
QWxlcnRCdWZmZXIgYW5kIE5vZGUtRXhwb3J0ZXIgaW4gdGhlIHNhbWUgcHJvamVjdCBqdXN0IGNo\
YW5naW5nIHRvIFRydWUgdGhlIHByb3BlciBmaWVsZHMgCiAgICAgIGNvc3Q6IOKCrDAuMDAKICAg\
IHBhcmFtZXRlcnM6CiAgICAgICMjIE9hdXRoCiAgICAgIC0gbmFtZTogUFJPTUVUSEVVU19TRUNV\
UkVEX0RFUExPWU1FTlQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IFRy\
dWUKICAgICAgICB0eXBlOiBib29sCiAgICAgICAgdGl0bGU6IERlcGxveSBQcm9tZXRoZXVzIHdp\
dGggT2F1dGgtUHJveHkgc2lkZWNhcgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEdlbmVyYWwgQ29u\
ZmlnCgogICAgICAjIyBBbGVydE1hbmFnZXIgUGFyYW1zCiAgICAgIC0gbmFtZTogU01UUF9IT1NU\
CiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVm\
YXVsdDogJ2xvY2FsaG9zdCcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLl0qJCIKICAg\
ICAgICB0aXRsZTogSG9zdG5hbWUgb3IgSVAgZm9yIFNNVFAgaG9zdAogICAgICAgIGRpc3BsYXlf\
Z3JvdXA6IEFsZXJ0TWFuYWdlciBDb25maWcKICAgICAgLSBuYW1lOiBTTVRQX1BPUlQKICAgICAg\
ICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICBkZWZhdWx0OiAy\
NQogICAgICAgIHRpdGxlOiBQb3J0IG51bWJlciBvZiBTTVRQIHNlcnZlcgogICAgICAgIGRpc3Bs\
YXlfZ3JvdXA6IEFsZXJ0TWFuYWdlciBDb25maWcKICAgICAgLSBuYW1lOiBTTVRQX0ZST00KICAg\
ICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0\
OiAnYWxlcnRtYW5hZ2VyQGV4YW1wbGUub3JnJwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAt\
OV8uKy1dK0BbYS16QS1aMC05LV0rLlthLXpBLVowLTktLl0rJCIKICAgICAgICB0aXRsZTogRW1h\
aWwgZnJvbSBmaWVsZCBmb3IgTm90aWZpY2F0aW9ucwogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEFs\
ZXJ0TWFuYWdlciBDb25maWcKICAgICAgLSBuYW1lOiBTTVRQX0FVVEhfVVNFUgogICAgICAgIHJl\
cXVpcmVkOiBGYWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6ICdhbGVy\
dG1hbmFnZXInCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAgICAgIHRp\
dGxlOiBVc2VybmFtZSB0byBiZSBhdXRoZW50aWNhdGVkIG9uIFNNVFAgc2VydmVyCiAgICAgICAg\
ZGlzcGxheV9ncm91cDogQWxlcnRNYW5hZ2VyIENvbmZpZwogICAgICAtIG5hbWU6IFNNVFBfQVVU\
SF9QQVNTCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4tXSokIgogICAgICAgIGRlZmF1bHQ6ICdwYXNzd29y\
ZCcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgdGl0bGU6IFBhc3N3b3Jk\
IHRvIGJlIGF1dGhlbnRpY2F0ZWQgb24gU01UUCBzZXJ2ZXIKICAgICAgICBkaXNwbGF5X2dyb3Vw\
OiBBbGVydE1hbmFnZXIgQ29uZmlnCgogICAgICAjIyBHcmFmYW5hIFBhcmFtcyAKICAgICAgLSBu\
YW1lOiBERVBMT1lfR1JBRkFOQQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVs\
dDogVHJ1ZQogICAgICAgIHR5cGU6IGJvb2wKICAgICAgICB0aXRsZTogRGVwbG95IEdyYWZhbmEg\
c2VydmVyIHdpdGggUHJvbWV0aGV1cyBhcyBkYXRhc291cmNlCiAgICAgICAgZGlzcGxheV9ncm91\
cDogR3JhZmFuYSBDb25maWcKCiAgICAgICMjIEFsZXJ0YnVmZmVyIFBhcmFtcyAKICAgICAgLSBu\
YW1lOiBERVBMT1lfQUxFUlRCVUZGRVIKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRl\
ZmF1bHQ6IFRydWUKICAgICAgICB0eXBlOiBib29sCiAgICAgICAgdGl0bGU6IERlcGxveSBBbGVy\
dGJ1ZmZlciBzZXJ2ZXIgd2l0aCBQcm9tZXRoZXVzLgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEFs\
ZXJ0YnVmZmVyIENvbmZpZwoKCiAgLSBuYW1lOiBwZXJzaXN0ZW50CiAgICBkZXNjcmlwdGlvbjog\
RGVwbG95bWVudCBvZiBQcm9tZXRoZXVzIGZvciBtZXRyaWNzIGFuZCBkYXRhIHZpZXcKICAgIGZy\
ZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogUGVyc2lzdGVudAogICAg\
ICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3kgdGhlIHByb21ldGhldXMgYmFzZSBz\
dGFjaywgUHJvbWV0aGV1cyB3aXRoIGEgc2lkZWNhciBPYXV0aC1Qcm94eSBhbmQgYWxzbyB0aGUg\
QWxlcnRNYW5hZ2VyIHNlcnZlciBiYXNlIG9uIFBlcnNpc3RlbnQgc3RvcmFnZS4gWW91IGNvdWxk\
IGRlcGxveSB0aGUgQWRkb25zIGxpa2UgR3JhcGhhbmEsIEFsZXJ0QnVmZmVyIGFuZCBOb2RlLUV4\
cG9ydGVyIGluIHRoZSBzYW1lIHByb2plY3QganVzdCBjaGFuZ2luZyB0byBUcnVlIHRoZSBwcm9w\
ZXIgZmllbGRzIAogICAgICBjb3N0OiDigqwwLjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAjIyBP\
YXV0aAogICAgICAtIG5hbWU6IFBST01FVEhFVVNfU0VDVVJFRF9ERVBMT1lNRU5UCiAgICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBUcnVlCiAgICAgICAgdHlwZTogYm9vbAog\
ICAgICAgIHRpdGxlOiBQcm9tZXRoZXVzIFNlY3VyZWQgd2l0aCBPYXV0aC1Qcm94eQogICAgICAg\
IGRpc3BsYXlfZ3JvdXA6IEdlbmVyYWwgQ29uZmlnCgogICAgICAjIyBQVidzCiAgICAgIC0gbmFt\
ZTogUFJPTUVUSEVVU19TVE9SQUdFX1NJWkUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6IDEwCiAgICAgICAgdHlwZTogbnVtYmVyCiAgICAgICAgdGl0bGU6IFByb21ldGhl\
dXMgU3RvcmFnZSBTaXplIChHYikKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDb250YWluZXIgU3Bl\
Y3MKICAgICAgLSBuYW1lOiBQUk9NRVRIRVVTX0FNX1NUT1JBR0VfU0laRQogICAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogMTAKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAg\
ICB0aXRsZTogUHJvbWV0aGV1cyBBbGVydCBNYW5hZ2VyIFN0b3JhZ2UgU2l6ZSAoR2IpCiAgICAg\
ICAgZGlzcGxheV9ncm91cDogQ29udGFpbmVyIFNwZWNzCiAgICAgIC0gbmFtZTogUFJPTUVUSEVV\
U19HUkFGQU5BX1NUT1JBR0VfU0laRQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVm\
YXVsdDogMTAKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICB0aXRsZTogUHJvbWV0aGV1cyBH\
cmFmYW5hIFN0b3JhZ2UgU2l6ZSAoR2IpCiAgICAgICAgZGlzcGxheV9ncm91cDogQ29udGFpbmVy\
IFNwZWNzCiAgICAgIC0gbmFtZTogUFJPTUVUSEVVU19BTEVSVEJVRkZFUl9TVE9SQUdFX1NJWkUK\
ICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDEwCiAgICAgICAgdHlwZTog\
bnVtYmVyCiAgICAgICAgdGl0bGU6IFByb21ldGhldXMgQWxlcnRidWZmZXIgU3RvcmFnZSBTaXpl\
IChHYikKICAgICAgICBkaXNwbGF5X2dyb3VwOiBDb250YWluZXIgU3BlY3MKCiAgICAgICMjIEFs\
ZXJ0TWFuYWdlciBQYXJhbXMKICAgICAgLSBuYW1lOiBTTVRQX0hPU1QKICAgICAgICByZXF1aXJl\
ZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiAnbG9jYWxob3N0\
JwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV8uXSokIgogICAgICAgIHRpdGxlOiBIb3N0\
bmFtZSBvciBJUCBmb3IgU01UUCBob3N0CiAgICAgICAgZGlzcGxheV9ncm91cDogQWxlcnRNYW5h\
Z2VyIENvbmZpZwogICAgICAtIG5hbWU6IFNNVFBfUE9SVAogICAgICAgIHJlcXVpcmVkOiBGYWxz\
ZQogICAgICAgIHR5cGU6IG51bWJlcgogICAgICAgIGRlZmF1bHQ6IDI1CiAgICAgICAgdGl0bGU6\
IFBvcnQgbnVtYmVyIG9mIFNNVFAgc2VydmVyCiAgICAgICAgZGlzcGxheV9ncm91cDogQWxlcnRN\
YW5hZ2VyIENvbmZpZwogICAgICAtIG5hbWU6IFNNVFBfRlJPTQogICAgICAgIHJlcXVpcmVkOiBG\
YWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6ICdhbGVydG1hbmFnZXJA\
ZXhhbXBsZS5vcmcnCiAgICAgICAgcGF0dGVybjogIl5bYS16QS1aMC05Xy4rLV0rQFthLXpBLVow\
LTktXSsuW2EtekEtWjAtOS0uXSskIgogICAgICAgIHRpdGxlOiBFbWFpbCBmcm9tIGZpZWxkIGZv\
ciBOb3RpZmljYXRpb25zCiAgICAgICAgZGlzcGxheV9ncm91cDogQWxlcnRNYW5hZ2VyIENvbmZp\
ZwogICAgICAtIG5hbWU6IFNNVFBfQVVUSF9VU0VSCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogJ2FsZXJ0bWFuYWdlcicKICAgICAg\
ICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfLi1dKiQiCiAgICAgICAgdGl0bGU6IFVzZXJuYW1lIHRv\
IGJlIGF1dGhlbnRpY2F0ZWQgb24gU01UUCBzZXJ2ZXIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBB\
bGVydE1hbmFnZXIgQ29uZmlnCiAgICAgIC0gbmFtZTogU01UUF9BVVRIX1BBU1MKICAgICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlth\
LXpBLVowLTlfLi1dKiQiCiAgICAgICAgZGVmYXVsdDogJ3Bhc3N3b3JkJwogICAgICAgIGRpc3Bs\
YXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogUGFzc3dvcmQgdG8gYmUgYXV0aGVudGlj\
YXRlZCBvbiBTTVRQIHNlcnZlcgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEFsZXJ0TWFuYWdlciBD\
b25maWcKCiAgICAgICMjIEdyYWZhbmEgcGFyYW1zCiAgICAgIC0gbmFtZTogREVQTE9ZX0dSQUZB\
TkEKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IFRydWUKICAgICAgICB0\
eXBlOiBib29sCiAgICAgICAgdGl0bGU6IERlcGxveSBHcmFmYW5hIHNlcnZlciB3aXRoIFByb21l\
dGhldXMgYXMgZGF0YXNvdXJjZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEdyYWZhbmEgQ29uZmln\
CgogICAgICAjIyBBbGVydGJ1ZmZlciBQYXJhbXMgCiAgICAgIC0gbmFtZTogREVQTE9ZX0FMRVJU\
QlVGRkVSCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBUcnVlCiAgICAg\
ICAgdHlwZTogYm9vbAogICAgICAgIHRpdGxlOiBEZXBsb3kgQWxlcnRidWZmZXIgc2VydmVyIHdp\
dGggUHJvbWV0aGV1cy4KICAgICAgICBkaXNwbGF5X2dyb3VwOiBBbGVydGJ1ZmZlciBDb25maWcK"

